(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(13),u=n.n(a),s=(n(19),n(2)),c=function(e){var t=e.addPerson,n=e.newName,r=e.newNumber,a=e.handleNameChange,u=e.handleNumberChange;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:t},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:n,onChange:a})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:r,onChange:u})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},l=function(e){var t=e.person,n=e.deletePerson;return o.a.createElement("div",null,o.a.createElement("li",{key:t.id},t.name," ",t.number,o.a.createElement("button",{value:t.id,onClick:n,name:t.name},"delete")))},i=function(e){var t=e.personsToShow,n=e.deletePerson;return o.a.createElement("div",null,o.a.createElement("ul",null,t.map((function(e){return o.a.createElement(l,{key:e.name,person:e,deletePerson:n})}))))},m=function(e){var t=e.newFilter,n=e.handleFilerChange;return o.a.createElement("div",null,"filter shown with",o.a.createElement("input",{value:t,onChange:n}))},f=n(3),p=n.n(f),d=function(){return p.a.get("/api/persons").then((function(e){return e.data}))},h=function(e){return p.a.post("/api/persons",e).then((function(e){return e.data}))},v=function(e,t){return p.a.put("".concat("/api/persons","/").concat(e),t).then((function(e){return e.data}))},b=function(e){return p.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.data}))},g=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:t.type},t.text)},E=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],u=Object(r.useState)(""),l=Object(s.a)(u,2),f=l[0],p=l[1],E=Object(r.useState)(""),w=Object(s.a)(E,2),y=w[0],x=w[1],T=Object(r.useState)(""),C=Object(s.a)(T,2),S=C[0],j=C[1],O=Object(r.useState)(null),N=Object(s.a)(O,2),k=N[0],q=N[1];Object(r.useEffect)((function(){d().then((function(e){a(e)})).catch((function(e){e.response?e.response.status&&404===e.response.status?(q({type:"error",text:"Can not get person data from server"}),setTimeout((function(){q(null)}),5e3)):(q({type:"error",text:"Something went wrong"}),setTimeout((function(){q(null)}),5e3)):e.request?(q({type:"error",text:"Connection to server lost"}),setTimeout((function(){q(null)}),5e3)):(q({type:"error",text:"Wrong request setting"}),setTimeout((function(){q(null)}),5e3))}))}),[]);var P=S?n.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):n;return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement("a",{href:"README.md"},"Read me"),o.a.createElement(g,{message:k}),o.a.createElement(m,{newFilter:S,handleFilerChange:function(e){j(e.target.value.toLowerCase())}}),o.a.createElement("h3",null,"Add a new"),o.a.createElement(c,{addPerson:function(e){if(e.preventDefault(),f&&y){var t=n.filter((function(e){return e.name===f})),r={name:f,number:y};if(t.length>0){var o=t[0].id;if(!window.confirm("".concat(f," is already added to phonebook, replace the old number with new one")))return;v(o,r).then((function(e){a(n.map((function(t){return t.id!==o?t:e}))),p(""),x(""),q({type:"successful",text:"The phonenumber has been upated for ".concat(f)}),setTimeout((function(){q(null)}),5e3)})).catch((function(e){e.response?e.response.status&&e.response.status?(q({type:"error",text:"Can not update person an error has been acquried ".concat(e.response.status)}),setTimeout((function(){q(null)}),5e3)):(q({type:"error",text:"Something went wrong ".concat(e.response.status)}),setTimeout((function(){q(null)}),5e3)):e.request?(q({type:"error",text:"Connection to server lost"}),setTimeout((function(){q(null)}),5e3)):(q({type:"error",text:"Wrong request setting"}),setTimeout((function(){q(null)}),5e3))}))}else h(r).then((function(e){a(n.concat(e)),p(""),x(""),q({type:"successful",text:"Added ".concat(f)}),setTimeout((function(){q(null)}),5e3)})).catch((function(e){e.response?e.response.status&&(400===e.response.status?q({type:"error",text:"".concat(e.response.data.error)}):q({type:"error",text:"Something went wrong ".concat(e.response.status)}),setTimeout((function(){q(null)}),5e3)):e.request?(q({type:"error",text:"Connection to server lost"}),setTimeout((function(){q(null)}),5e3)):(q({type:"error",text:"Wrong request setting"}),setTimeout((function(){q(null)}),5e3))}))}else alert("PLease enter the name of person and number")},newName:f,newNumber:y,handleNameChange:function(e){p(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),o.a.createElement("h3",null,"Numbers"),o.a.createElement(i,{deletePerson:function(e){e.preventDefault();var t=e.target.name;if(window.confirm("Delete ".concat(t," ?"))){var r=e.target.value;b(r).then((function(e){a(n.filter((function(e){return e.id!==r}))),q({type:"successful",text:"Person ".concat(t," has been successfully deleted")}),setTimeout((function(){q(null)}),5e3)})).catch((function(e){e.response?e.response.status&&404===e.response.status?(q({type:"error",text:"Information fof ".concat(t," has already been removed from the server")}),setTimeout((function(){q(null)}),5e3)):(q({type:"error",text:"Something went wrong"}),setTimeout((function(){q(null)}),5e3)):e.request?(q({type:"error",text:"Connection to server lost"}),setTimeout((function(){q(null)}),5e3)):(q({type:"error",text:"Wrong request setting"}),setTimeout((function(){q(null)}),5e3))}))}},personsToShow:P}))};u.a.render(o.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.5f979c01.chunk.js.map